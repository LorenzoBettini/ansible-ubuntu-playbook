---
- hosts: localhost
  tasks:

  - name: Install Main Packages
    become: yes
    apt:
      update_cache: yes
      state: latest
      pkg:
      - vim
      - curl
      - wget
      - curl
      - git
      - git-gui
      - gitk
      - apt-transport-https
      - unison-gtk
      - thunderbird
    register: aptout

  - debug: msg="{{ aptout.stdout_lines }}"
    when: aptout.stdout_lines is defined

  - name: Install Docker
    become: yes
    apt:
      update_cache: yes
      state: latest
      pkg:
      - docker.io
      - docker-compose
    register: aptout

  - debug: msg="{{ aptout.stdout_lines }}"
    when: aptout.stdout_lines is defined

  - name: Allow running Docker without sudo
    become: yes
    user:
      name: "{{ ansible_user_id }}"
      groups: docker
      append: yes

  - name: Remove useless packages from the cache
    become: yes
    apt:
      autoclean: yes

  - name: Remove dependencies that are no longer required
    become: yes
    apt:
      autoremove: yes
    register: aptout

  - debug: msg="{{ aptout.stdout_lines }}"
    when: aptout.stdout_lines is defined

